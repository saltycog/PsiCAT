services:
  psicat-discordapp:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: psicat-discordapp
    ports:
      - "5000:5000"
    environment:
      - ASPNETCORE_ENVIRONMENT=Production
      - Discord__BotToken=${DISCORD_BOT_TOKEN}
      - Discord__GuildId=${DISCORD_GUILD_ID}
      - PsiCat__AvatarBaseUrl=${AVATAR_BASE_URL:-http://localhost:5000}
    volumes:
      # Override quotes at runtime without rebuilding
      - ./PsiCAT.DiscordApp/Data:/app/Data
      # Static avatar files
      - ./PsiCAT.DiscordApp/wwwroot:/app/wwwroot
    restart: unless-stopped
    # Uncomment to see logs
    # logging:
    #   driver: "json-file"
    #   options:
    #     max-size: "10m"
    #     max-file: "3"
